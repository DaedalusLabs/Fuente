class t{constructor(t,s){this.x=t,this.y=s}}class s extends t{setAxes(t,s){this.x=t,this.y=s}clone(t){this.setAxes(t.x,t.y)}getInstance(){return{x:this.x,y:this.y}}isInstanceEqual(t){return this.x===t.x&&this.y===t.y}isEqual(t,s){return this.x===t&&this.y===s}isNotEqual(t,s){return this.x!==t||this.y!==s}}class i{constructor(t,s,i,e){this.top=t,this.right=s,this.bottom=i,this.left=e}}class e extends i{clone(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left}setBox(t,s,i,e){return this.top=t,this.right=s,this.bottom=i,this.left=e,this}getBox(){return{top:this.top,right:this.right,bottom:this.bottom,left:this.left}}setByAxis(t,s,i){"x"===t?(this.left=s,this.right=i):(this.top=s,this.bottom=i)}setOne(t,s,i){"x"===t?-1===s?this.left=i:this.right=i:-1===s?this.top=i:this.bottom=i}getOne(t,s){return"x"===t?-1===s?this.left:this.right:-1===s?this.top:this.bottom}setPositionInstance(t){this.top=t.y,this.left=t.x}setPosition(t,s){this.top=s,this.left=t}hasEqualPosition(t,s){return this.top===s||this.left===t}getPosition(){return{x:this.left,y:this.top}}}class n extends e{constructor(t,s,i,e){super(t,s,i,e)}setFalsy(){return this.setBox(!1,!1,!1,!1),this}isTruthyByAxis(t){return"x"===t?this.left||this.right:this.top||this.bottom}isTruthyOnSide(t,s){return"x"===t?1===s?this.right:this.left:1===s?this.bottom:this.top}isTruthy(){return this.left||this.right||this.top||this.bottom}}class h extends e{t(t){return this.top>=t.bottom}i(t){return this.bottom<=t.top}h(t){return this.right<=t.left}o(t){return this.left>=t.right}l(t){return this.top<t.top}u(t){return this.right>t.right}m(t){return this.bottom>t.bottom}p(t){return this.left<t.left}_(t){return this.top>=t.top}T(t){return this.right<=t.right}O(t){return this.bottom<=t.bottom}S(t){return this.left>=t.left}isBoxIntersect(t){return!(this.i(t)||this.o(t)||this.t(t)||this.h(t))}isOutThreshold(t,s,i){if(s.setBox(!1,!1,!1,!1),i){if("y"===i){const i=this.l(t),e=this.m(t);return i&&(s.top=!0),e&&(s.bottom=!0),i||e}const e=this.p(t),n=this.u(t);return e&&(s.left=!0),n&&(s.right=!0),e||n}return this.l(t)?(s.top=!0,!0):this.u(t)?(s.right=!0,!0):this.m(t)?(s.bottom=!0,!0):!!this.p(t)&&(s.left=!0,!0)}isInsideThreshold(t){return this._(t)&&this.T(t)&&this.O(t)&&this.S(t)}getSurroundingBox(t){return{left:Math.min(t.left,this.left),top:Math.min(t.top,this.top),right:Math.max(t.right,this.right),bottom:Math.max(t.bottom,this.bottom)}}isPositionedY(t){return this.t(t)||this.i(t)}assignBiggestBox(t){const{top:s,left:i,right:e,bottom:n}=t;i<this.left&&(this.left=i),s<this.top&&(this.top=s),e>this.right&&(this.right=e),n>this.bottom&&(this.bottom=n)}}function r(t,s){return`${t}_${s}`}function o(t){const s={easing:"ease-in",duration:"dynamic"};return void 0===t?s:null===t?null:{...s,...t}}function c(){}const l=new Set,u="height",a="width",d="min-height",f="position",g="opacity";function m(t){return"x"===t?a:u}function p(t){return"x"===t?"left":"top"}class _ extends h{constructor(t,s,i,e){super(t,s,i,e),this.width=s-e,this.height=i-t}setByPointAndDimensions(t,s,i,e){this.top=t,this.left=s,this.width=e,this.height=i,this.right=s+e,this.bottom=t+i}setAxes(t,s){this.left=t,this.right=this.width+t,this.top=s,this.bottom=this.height+s}getInstance(){const{top:t,left:s,bottom:i,right:e,width:n,height:h}=this;return{top:t,left:s,bottom:i,right:e,width:n,height:h}}getViewportPos(t,s,i){const e=t,n=s+this.width,r=t+this.height,o=s;return i?new h(e,n,r,o):{top:e,right:n,bottom:r,left:o,height:this.height,width:this.width}}getDimensionDiff(t,s){const i=m(t);return this[i]-s[i]}getPositionDiff(t,s){return this[p(t)]-s[t]}}class T extends s{increase(t){return this.x+=t.x,this.y+=t.y,this}composeBox(t,s){const{top:i,left:e,bottom:n,right:r}=t;return s?new h(i+this.y,r-this.x,n-this.y,e+this.x):new h(i-this.y,r+this.x,n+this.y,e-this.x)}onSameAxis(t,s){return"y"===t?s.x===this.x:s.y===this.y}}class y extends s{isOneTruthy(){return this.x||this.y}isAllFalsy(){return!(this.x||this.y)}setFalsy(){this.x=!1,this.y=!1}}class O{static containerKey(t,s){return r(t,s)}static depthKey(t){return r(t,"dp")}constructor(t){this.D=t,this.thresholds={},this.isOut={}}v({width:t,height:s}){const i=Math.round(this.D.horizontal*t/100),e=Math.round(this.D.vertical*s/100);this.N=new T(i,e)}R(t,s,i){this.thresholds[t]=this.N.composeBox(s,i),this.isOut[t]=new n(!1,!1,!1,!1)}setMainThreshold(t,s,i){this.v(s),this.R(t,s,i)}updateMainThreshold(t,s,i){this.thresholds[t]=this.N.composeBox(s,i),this.isOut[t].setFalsy()}getElmMainThreshold(t){return this.N.composeBox(t,!1)}setContainerThreshold(t,s,i,e){this.R(t,i,!1);const{top:n,left:h}=i,{height:r,width:o}=e,c=O.containerKey(s,t),l=O.depthKey(s);this.R(c,{left:h,top:n,right:h+o,bottom:n+r},!1),this.thresholds[l]?this.thresholds[l].assignBiggestBox(this.thresholds[c]):this.R(l,this.thresholds[c],!1)}isOutThreshold(t,s,i){return s.isOutThreshold(this.thresholds[t],this.isOut[t],i)}destroy(){Object.keys(this.thresholds).forEach((t=>{delete this.thresholds[t]})),Object.keys(this.isOut).forEach((t=>{delete this.isOut[t]}))}}const S={x:null,y:null};class E{constructor(){this.A=new h(0,0,0,0),this.M={...S}}setZone(t,s,i,e){const n=i.getSurroundingBox(e);this.A.clone(n),this.M[t]=s}isInside(t,s,i){return!!i.isInsideThreshold(this.A)&&s===this.M[t]}clear(){this.A.setBox(0,0,0,0),this.M={...S}}}var w=new class{constructor(){this.I={}}newTravel(t){return void 0===this.I[t]?this.I[t]=0:this.I[t]+=1,`${t}${this.I[t]}`}};const x="dflex_cycle_";function D(t,s){let i=0,e=t;try{do{if(i+=1,i>1&&s(e))return i=0,e;e=e.parentElement}while(null!==e&&!e.isSameNode(document.body))}catch(t){}finally{i=0}return null}function b(t,s,i,e=!0,n="true"){const h=e?`data-${s}`:s;i?t.removeAttribute(h):t.setAttribute(h,n)}function v(t,s){b(t,"index",!1,!0,`${s}`)}function N(t,s,i){const{left:e,top:n,right:h,bottom:r,height:o,width:c}=t.getBoundingClientRect(),l=new _(n,h,r,e);return 0===s&&0===i||l.setByPointAndDimensions(n+i,e+s,o,c),l}const R=[];function A(t){cancelAnimationFrame(t)}function M(){let t,s=!0;function i(){s=!0}function e(){A(t),R.splice(R.indexOf(t),1)}return[function(n,h){h&&e();try{s=!1;const e=function(t,s){return i=>{t(i),s()}}(n,i);t=requestAnimationFrame(e),R.push(t)}catch(t){}},e,function(){return s}]}const I=[];function C(t){let s=null,i=!1;function e(){s&&(clearTimeout(s),s=null)}return I.push(e),[function(n,h){const r=n||c;i=!0,h&&e(),s=setTimeout((()=>{i=!1,r()}),t)},e,function(){return i}]}const[K,P]=C(0);class L{constructor(){this.C={},this.K=new Set}P(t){Array.isArray(this.C[t])||(this.C[t]=[])}L(t,s,i){this.C[s].push(t),i&&this.K.add(i)}B(t){return!Array.isArray(this.C[t])||0===this.C[t].length}hasElm(t){return this.K.has(t)}enqueueBeforeLast(t,s,i,e){this.P(i);const{length:n}=this.C[i];0===n?this.C[i].push(s):this.C[i][n-1]=s,this.L(t,i,e)}enqueue(t,s,i){this.P(s),this.L(t,s,i)}executeQueue(t){const s=[];if(this.B(t))return s;try{this.C[t].forEach((t=>{const i=t();s.push(i)}))}catch(t){}finally{P(),delete this.C[t]}return s}G(t){K((()=>{const[s,i]=t;this.executeQueue(s),i&&queueMicrotask((()=>this.executeQueue(i))),this.K.clear()}),!0)}scheduleNextTask(t){this.G(t)}cancelQueuedTask(){P()}clear(){P(),this.C={},this.K.clear()}}function B(t,s=!1,i=200){const[e,n]=C(i),[h,r]=M();let o=performance.now(),c=!1;const l=()=>{if(c)return;const n=performance.now();s||n-o>=i?(h(t,!0),o=n):e(l,!0)};return l.isPaused=()=>c,l.pause=()=>{c||(c=!0,r(),n())},l.resume=()=>{c&&(c=!1,l())},l}class G{constructor(t,s,i,e,n){this.index=t,this.SK=i,this.id=s,this.cycleID=e,this.hasScroll=n,this.reconciledIDs=new Set,this.numberOfTransformedELm=0,this.marginBottom=null,this.marginTop=null}}class F{constructor(t,s,i,e,n){const h=new G(t,s,i,e,n);this.F=[h],this.SKs=[i],this.complete(),this.isActive=!0}latest(){return this.F[this.F.length-1]}prev(){return this.F[this.F.length-2]}getAll(){return this.F}filter(t,s){return this.F.filter(s?s=>t.find((t=>t===s.cycleID)):s=>t.find((t=>t===s.id)))}k(t){this.SKs=this.SKs.filter((s=>!t.has(s)))}flush(t){const s=new Set;this.F=this.F.filter((i=>void 0===t.find((t=>t===i.SK&&(s.add(i.SK),!0)))||(s.has(i.SK)&&s.delete(i.SK),!1))),this.k(s)}pruneSKFromMigration(t){this.F=this.F.filter((s=>s.SK!==t)),this.k(new Set([t]))}setIndex(t){this.latest().index=t,this.latest().numberOfTransformedELm+=1}preserveVerticalMargin(t,s){this.latest()["bottom"===t?"marginBottom":"marginTop"]=s}clearMargin(){this.latest().marginBottom=null,this.latest().marginTop=null}add(t,s,i,e,n,h){this.F.push(new G(t,s,i,n,h)),e?this.SKs.unshift(i):this.SKs.push(i)}updateReconciledIDs(t,s){const i=this.F.find((s=>s.SK===t));i&&(i.reconciledIDs.clear(),s.forEach((t=>i.reconciledIDs.add(t))))}getMigrationBySK(t){return this.F.find((s=>s.SK===t))}getReconciledIDsBySK(t){const s=this.F.find((s=>s.SK===t));return s?s.reconciledIDs:l}start(){this.isTransitioning=!0}complete(){this.isTransitioning=!1,this.preserveVerticalMargin("top",null),this.preserveVerticalMargin("bottom",null)}clear(){this.F=[],this.SKs=[],this.isActive=!1}}const k=Object.freeze(["x","y"]);let V=new WeakMap;function $(t,s,i){t.style.setProperty(s,i)}function H(t,s){t.style.removeProperty(s)}function U(t,s,i){const e=function(t){if(V.has(t))return V.get(t);const s={computedStyle:getComputedStyle(t),parsedProperties:new Map};return V.set(t,s),s}(t),{parsedProperties:n,computedStyle:h}=e,r=n.get(s);if(void 0===r){const t=h.getPropertyValue(s),e=i?function(t){const s=parseFloat(t);return Number.isNaN(s)?0:s}(t):t;return n.set(s,e),e}return r}function z(t){return{width:U(t,a,!0),height:U(t,u,!0)}}const j=/absolute|fixed/;function q(t){return U(t,f,!1)}function W(t,s){return t.filter((t=>t!==s))}function Y(t,s){return t.some((t=>t===s))||t.push(s),t}class Q{constructor(){this.V=new Map,this.$=new Map,this.H=new Map,this.U=[],this.j=0}q(t,s){return this.V.has(t)||this.V.set(t,[]),this.V.get(t).push(s)-1}W(t,s){this.$.has(t)||this.$.set(t,[]),Y(this.$.get(t),s)}Y(t){Y(this.U,t)}X(t){for(let s=this.U.length-1;s>=0;s-=1)if(this.U[s]!==t)return this.U[s];return null}getHighestDepthInBranch(t){const s=this.H.get(t),i=s.size-1;return[i,s.get(i)]}getTopLevelSKs(){const t=new Set;return this.H.forEach(((s,i)=>{const[,{SK:e,ids:n}]=this.getHighestDepthInBranch(i);t.add({SK:e,id:n[0]})})),t}constructBK(t){return t&&(this.j+=1),`dflex_bk_${this.j}`}constructPK(t){return`dflex_ky_${r(t,this.j)}`}constructSK(t,s){return`dflex_sk_${r(t,s)}`}Z(t,s,i){let e=this.V.get(t);i>0&&(e=[e[e.length-1]]);let n=this.H.get(s);n||(n=new Map,this.H.set(s,n));let h=n.get(i);return h?(h.ids=e,h.SK=t):(h={ids:e,SK:t},n.set(i,h)),h}J(t,s){const i=this.X(t),[e,n]=this.getHighestDepthInBranch(i);s+1===e&&this.Z(n.SK,t,e)}tt(t,s,i,e){this.Y(t),this.Z(s,t,i),e&&this.J(t,i)}registerKeys(t,s,i,e,n){this.W(e,s);const h=this.q(s,t);return this.tt(i,s,e,n),h}mutateSiblings(t,s){this.V.has(t)&&this.V.set(t,s)}getSiblingsByKey(t){return this.V.get(t)||[]}getSKByDepth(t){return this.$.get(t)||[]}st(t,s){const i=this.$.get(s);this.$.set(s,i.filter((s=>s!==t))),0===this.$.get(s).length&&this.$.delete(s)}it(t,s){const i=W(this.V.get(t),s);0===i.length?this.V.delete(t):this.V.set(t,i)}deleteIDFromBranch(t,s,i,e){this.it(s,e);const n=this.H.get(t),h=n.get(i),r=W(h.ids,e);0===r.length?n.delete(i):n.set(i,{ids:r,SK:h.SK})}deleteSiblings(t,s){const i=this.H.get(t);for(let t=s;t>=0;t-=1){const{SK:s}=i.get(t);this.st(s,t),this.V.delete(s),i.delete(t)}0===this.H.get(t).size&&(this.H.delete(t),this.U=W(this.U,t))}destroy(){this.V.clear(),this.$.clear(),this.H.clear(),this.U=[]}et(){}}class X extends Q{constructor(){super(),this.nt()}nt(){this.ht={},this.rt={},this.ot=-99,this.ct=this.constructPK(0),this.lt=null}ut(t){for(let s=t;s<=t+2;s+=1)void 0===this.ht[s]&&(this.ht[s]=0)}dt(t,s,i,e){const{BK:n,PK:h}=i,r=n!==this.lt;this.lt=n,r&&(this.ht[t]=0);const o=this.constructSK(t,e);let c=null;return t>0&&(c=this.ct),this.ht[t]+=1,{siblingsIndex:e,CHK:c,SK:o,PK:h,BK:n}}ft(t,s){const i=t+1;void 0===this.ht[i]&&this.ut(t);const e=t<this.ot;if(e){const i=s?t:t-1;for(let t=0;t<=i;t+=1)this.ht[t]=0}const n=this.constructBK(e);s&&this.ht[i]>0&&(this.ht[i]-=1);const h=this.ht[i],r=this.constructSK(t,h);let o=this.constructPK(t+1);s?o=this.rt[t]:this.rt[t]=o;let c=null;return t>0&&(c=this.ct),this.ct=o,this.ot=t,this.ht[t]+=1,{siblingsIndex:h,CHK:c,SK:r,PK:o,BK:n}}gt(t,s,i,e,n){const{SK:h,BK:r}=i;return{order:{self:this.registerKeys(t,h,r,s,n),parent:e},keys:i}}register(t,s,i,e,n){const{CHK:h,SK:r,PK:o,BK:c,siblingsIndex:l}=e?this.dt(s,t,e,n):this.ft(s,i);return this.gt(t,s,{CHK:h,SK:r,PK:o,BK:c},l,i)}endRegistration(){this.lt=null}clear(){this.nt(),super.destroy()}}function Z(t,s,i){$(t,"transform",`translate3d(${s}px, ${i}px, 0)`)}class J{static getType(){return"base:element"}static transform=Z;constructor(t){this.id=t,this.translate=new T(0,0)}}const tt="transition-property",st="transition-delay",it="transition-duration",et="transition-timing-function";const nt="transitionend";class ht extends J{static getType(){return"core:element"}constructor(t){const{order:s,keys:i,depth:e,readonly:n,animation:h,id:r,CSSTransform:o}=t;super(r),this.VDOMOrder={...s},this.DOMOrder={...s},this.keys={...i},this.depth=e,this.readonly=n,this._t=h,this.Tt=o,[this.yt]=M(),this.Ot=!0,this.St=!1,this.Et=void 0,this.wt=null,this.xt=new T(0,0),this.rect=new _(0,0,0,0),this.DOMGrid=new T(0,0)}updateConfig(t,s,i){this.readonly=t,this._t=s,this.Tt=i}initElmRect(t,s,i){this.rect=N(t,s,i);const{left:e,top:n}=this.rect;this.xt.setAxes(e,n),this.Dt(t)}Dt(t){const s=function(t){const s=function(t){if(!/matrix\([^)]+\)/.test(t))return null;const s=t.match(/matrix\(\s*([^,]+),\s*([^,]+),\s*([^,]+),\s*([^,]+),\s*([^,]+),\s*([^)]+)\)/);return s?[parseFloat(s[5]),parseFloat(s[6])]:null}(U(t,"transform",!1));return s}(t);if(s){const[t,i]=s,e=this.xt.x-t,n=this.xt.y-i;this.xt.setAxes(e,n),this.rect.setByPointAndDimensions(n,e,this.rect.height,this.rect.width),this.translate.setAxes(t,i)}}getDimensions(t){if(this.wt)return this.wt;const{width:s,height:i}=z(t);return this.wt=new T(s,i),this.wt}getInitialPosition(){return this.xt}changeVisibility(t,s){s!==this.Ot&&(this.Ot=s,this.St&&this.Ot&&(this.bt(t,null),this.St=!1))}bt(t,s,i=c){if(!this.Ot)return void(this.St=!0);const e=()=>{this.Tt&&function(t,s){"string"!=typeof s?function(t,s){Object.keys(s).forEach((s=>{H(t,s)}))}(t,s):function(t,s){t.classList.remove(s)}(t,s)}(t,this.Tt),this._t&&function(t){H(t,tt),H(t,st),H(t,it),H(t,et)}(t),s&&t.removeEventListener(nt,e),i()};this.yt((()=>{if(this.Tt&&function(t,s){"string"!=typeof s?function(t,s){Object.entries(s).forEach((([s,i])=>{$(t,s,i)}))}(t,s):function(t,s){t.classList.add(s)}(t,s)}(t,this.Tt),null===s)return ht.transform(t,this.translate.x,this.translate.y),void e();t.addEventListener(nt,e),function(t,s,i,e){$(t,tt,"transform"),$(t,st,"0ms"),$(t,it,`${i}ms`),$(t,et,e)}(t,0,s,this._t.easing),ht.transform(t,this.translate.x,this.translate.y)}),!0)}updateIndex(t,s){v(t,s),this.VDOMOrder.self=s}assignNewIndex(t,s){t[s]=this.id}vt(t,s,i){const e={axes:t,numberOfPassedElm:i,translate:this.translate.getInstance()};void 0===this.Et&&(this.Et=new Map),this.Et.has(s)||this.Et.set(s,[]),this.Et.get(s).push(e)}Nt(t,s,i){if(s)return!this.Ot&&this.St?void(this.St=!1):void this.bt(t,i);this.Ot?this.bt(t,i):this.St=!0}Rt(t,s,i,e){let n=null;if(this._t){const{duration:t}=this._t,i=this.translate.getInstance(),e=this.translate.increase(s).getInstance();n="number"==typeof t?t:function(t,s){const i=t.x-s.x,e=t.y-s.y,n=Math.sqrt(i*i+e*e);return 20*Math.sqrt(n)}(i,e)}else this.translate.increase(s);this.rect.setAxes(this.xt.x+this.translate.x,this.xt.y+this.translate.y),this.Nt(t,i,n);const{self:h}=this.VDOMOrder,r=h+e;return this.updateIndex(t,r),[h,r]}At(t,s,i){if(-1!==t)for(let t=0;t<s;t+=1)this.DOMGrid.x+=1,this.DOMGrid.x>i.x&&(this.DOMGrid.x=0,this.DOMGrid.y+=1);else for(let t=0;t<s;t+=1)this.DOMGrid.x-=1,this.DOMGrid.x<0&&(this.DOMGrid.x=i.x,this.DOMGrid.y-=1)}reconcilePosition(t,s,i,e,n,h,r,o){let c;const l={x:1===s?-1:1,y:s};"z"===t?c=k:(c=[t],l[t]=s),c.forEach((t=>{n[t]*=l[t],this.At(l[t],h,r)})),this.vt(t,o,h);const u=s*h,[a,d]=this.Rt(i,n,!1,u);e[a]="",e[d]=this.id}restorePosition(t){this.bt(t,null),v(t,this.VDOMOrder.self)}assignNewPosition(t,s){this.translate.clone(s),this.bt(t,null)}rollBackPosition(t,s){if(void 0===this.Et||!this.Et.has(s))return;const i=this.Et.get(s),{translate:e,axes:n,numberOfPassedElm:h}=i.pop(),r={x:e.x-this.translate.x,y:e.y-this.translate.y};let o=0;const c={x:r.x>0?1:-1,y:r.y>0?1:-1};if("z"===n?(o=r.x>0||r.y>0?1:-1,this.DOMGrid.increase({x:c.x*h,y:c.y*h})):(o=c[n]*h,this.DOMGrid[n]+=o),this.Rt(t,r,!0,o),0===i.length)return this.Et.delete(s),void(0===this.Et.size&&(this.Et=void 0));this.rollBackPosition(t,s)}hasTransformedFromOrigin(){return this.xt.isNotEqual(this.rect.left,this.rect.top)}needDOMReconciliation(){return this.VDOMOrder.self!==this.DOMOrder.self}refreshIndicators(t){this.Et=void 0,this.translate.setAxes(0,0),this.St=!1,this.DOMOrder.self=this.VDOMOrder.self,H(t,"transform"),function(t,s){if(!t.hasAttribute(s))return;const i=t.getAttribute(s);i&&""===i.trim()&&t.removeAttribute(s)}(t,"style"),this.DOMGrid.setAxes(0,0)}serializedElm(t,s){return{type:ht.getType(),version:3,id:this.id,grid:this.DOMGrid.getInstance(),order:this.VDOMOrder,translate:this.translate.getInstance(),initialPosition:this.xt.getInstance(),rect:this.rect.getViewportPos(t,s,!1),hasTransformedFromOrigin:!this.St&&this.hasTransformedFromOrigin(),hasPendingTransformation:this.St,isVisible:this.Ot}}}class rt extends ht{static getDistance(t,s,i){let e=t[i]-s.rect["x"===i?"left":"top"];return e+=s.translate[i],e}static getDisplacement(t,s,i){return t[i]-("x"===i?s.rect.right:s.rect.bottom)}getDisplacement(t,s){return rt.getDisplacement(this.rect.getPosition(),t,s)}getDistance(t,s){return rt.getDistance(this.rect.getPosition(),t,s)}}class ot{constructor(t,s,i,e){this.id=t,this.Mt=new T(-1,-1),this.grid=new T(-1,-1),this.originLength=i,this.It=new h(0,0,0,0),this.Ct=null;const{left:n,top:r}=e;this.Kt=N(s,n,r),this.lastElmPosition=null}Pt(t){const s=this.It;return s.isPositionedY(t)?(this.Mt.y+=1,this.Mt.x=0,this.It.setBox(0,0,0,0)):this.Mt.x+=1,this.Mt.x>this.grid.x&&(this.grid.x=this.Mt.x),this.Mt.y>this.grid.y&&(this.grid.y=this.Mt.y),s.assignBiggestBox(t),this.Mt}register(t,s){this.Ct?this.Ct.assignBiggestBox(t):this.Ct=new _(t.top,t.right,t.bottom,t.left);const i=this.Pt(t),e=this.Ct,n=s;if(!n)return i;const h=e.bottom-e.top,r=e.right-e.left;return n.height<h&&(n.height=h),n.width<r&&(n.width=h),i}extendGrid(t){this.grid[t]+=1}reduceGrid(t){this.grid[t]-=1}getBoundaries(){return this.Ct||this.Kt}resetIndicators(t){this.Mt.setAxes(-1,-1),this.grid.setAxes(-1,-1),this.originLength=t,this.It.setBox(0,0,0,0),this.Ct=null,this.lastElmPosition=null}preservePosition(t){this.lastElmPosition?this.lastElmPosition.setAxes(t.x,t.y):this.lastElmPosition=new T(t.x,t.y)}}const ct=/(auto|scroll|overlay)/;function lt(t,s){return"y"===t?s.scrollHeight>s.clientHeight:s.scrollWidth>s.clientWidth}function ut(t,s){return!!function(t,s){const i=U(s,"x"===t?"overflow-x":"overflow-y",!1);return ct.test(i)}(t,s)&&lt(t,s)}const at={horizontal:25,vertical:25},dt={horizontal:10,vertical:10};class ft{static getType(){return"scroll:container"}constructor(t,s,i,e){this.Lt=s,this.Bt=e,this.Gt={inner:{threshold:null,key:`scroll_inner_${s}`},outer:{threshold:null,key:`scroll_outer_${s}`}},this.Ft=`scroll__${s}`,this.hasOverflow=new y(!1,!1),this.totalScrollRect=new _(0,0,0,0),this.visibleScrollRect=new _(0,0,0,0),this.kt=new _(0,0,0,0),this.Vt=!1,this.initialize(t,i),this.$t(!0)}initialize(t,s){[this.Ht,this.Ut]=function(t,s){const i=[document.documentElement,!0];if(!t)return i;const e=q(t),n=D(t,(t=>function(t,s,i){const e=function(t,s){return"fixed"!==s&&("absolute"!==s||"static"!==q(t))}(t,s);return!!e&&(i.x=ut("x",t),i.y=ut("y",t),i.isOneTruthy())}(t,e,s)));return n&&(i[0]=n,i[1]=!1),i}(t,this.hasOverflow),this.zt(),this.Vt=s>10,this.Ut?this.jt():this.qt()}hasDynamicVisibility(){return this.Vt&&this.hasOverflow.isOneTruthy()}Wt(t,s){const i=this.Gt[t];if(i.threshold&&(i.threshold.destroy(),i.threshold=null),!s)return;const e=new O(s);i.threshold=e,e.setMainThreshold(i.key,this.kt,"inner"===t)}Yt(t,s){const i=this.Ft,e=s.toString(),n=this.Ut?document.body:this.Ht;t?n.dataset[i]=e:delete n.dataset[i]}qt(){if(this.hasOverflow.isAllFalsy())return this.Wt("inner",null),this.Wt("outer",null),void this.Yt(!1,!0);this.Yt(!0,!0),this.Wt("inner",dt),this.hasDynamicVisibility()&&this.Wt("outer",at)}jt(){const t=lt("x",this.Ht),s=lt("y",this.Ht);this.hasOverflow.setAxes(t,s),this.qt()}Qt(t,s){return this.Ht["x"===t?"scrollWidth":"scrollHeight"]!==s}hasScrollDimensionChanges(){const{width:t,height:s}=this.totalScrollRect;return this.Qt("y",s)||this.Qt("x",t)}zt(){const{scrollHeight:t,scrollWidth:s,scrollLeft:i,scrollTop:e,clientHeight:n,clientWidth:h}=this.Ht;if(this.totalScrollRect.setByPointAndDimensions(e,i,t,s),this.kt.setByPointAndDimensions(0,0,n,h),this.Ut)this.visibleScrollRect.setByPointAndDimensions(e,i,n,h);else{const{left:t,top:s}=this.Ht.getBoundingClientRect();this.visibleScrollRect.setByPointAndDimensions(s,t,n,h)}}Xt(t,s,i){if(!this.totalScrollRect.hasEqualPosition(t,s))return!1;this.totalScrollRect.setPosition(t,s);const{width:e,height:n}=this.visibleScrollRect;return this.visibleScrollRect.setBox(s,t+e,s+n,t),i&&(this.Ht.scrollTop=s,this.Ht.scrollLeft=t),!0}scrollTo(t,s){this.Xt(-1===t?this.totalScrollRect.left:t,-1===s?this.totalScrollRect.right:s,!0),this.Bt(this.Lt)}Zt(t){const s=p(t),i=this.totalScrollRect[s],e=function(t){return"x"===t?"right":"bottom"}(t),n=this.totalScrollRect[e],h=m(t);return[i,n,this.kt[h]]}calculateDistance(t,s){const[i,e,n]=this.Zt(t);return 1===s?e-(i+n):i}hasScrollableArea(t,s){const[i,e,n]=this.Zt(t);return 1===s?i+n<e:i>0}Jt=B((()=>{const{scrollLeft:t,scrollTop:s}=this.Ht;this.Xt(t,s,!1)&&this.Bt(this.Lt)}));ts=B((()=>{this.zt(),this.jt()}));$t(t){const s=t?"addEventListener":"removeEventListener",i=this.Ut?window:this.Ht,e={passive:!0};i[s]("resize",this.ts,e),i[s]("scroll",this.Jt,e)}pauseListeners(t){t?this.Jt.pause():this.Jt.resume()}getMaximumScrollContainerLeft(){const{left:t,width:s}=this.kt;return t+s+this.totalScrollRect.left}getMaximumScrollContainerTop(){const{top:t,height:s}=this.kt;return t+s+this.totalScrollRect.top}getElmViewportPosition(t,s){const{top:i,left:e}=this.totalScrollRect;return[t-i,s-e]}isElmOutViewport(t,s){const i=this.Gt[s?"outer":"inner"],{threshold:e,key:n}=i,h=s=>e.isOutThreshold(n,t,s),{x:r,y:o}=this.hasOverflow;return[o&&h("y")||r&&h("x"),e.isOut[n]]}destroy(){this.$t(!1),this.Wt("inner",null),this.Wt("outer",null),this.Yt(!1,!0),this.Bt=void 0,this.Ht=void 0}}class gt{constructor(){this.registry=new Map,this.interactiveDOM=new Map,this.deletedDOM=new WeakSet}getElmWithDOM(t,s=!0){return[this.registry.get(t),this.interactiveDOM.get(t)]}has(t){return this.interactiveDOM.has(t)&&this.registry.has(t)}getSKByID(t){const{keys:{SK:s}}=this.registry.get(t);return s}dispose(t){this.registry.delete(t);const s=this.interactiveDOM.get(t);this.deletedDOM.add(s),this.interactiveDOM.delete(t)}destroy(){this.interactiveDOM.clear(),this.registry.clear()}}function mt(t){let{id:s}=t;return s||(s=w.newTravel("dflex_id_"),t.id=s),s}const pt={removeEmptyContainer:!1,enableEvents:!0,enableListeners:!0,enableDragSettleOnSwitch:!0};function _t(t,s,i,e){const{id:n,depth:h,readonly:r,animation:o,CSSTransform:c}=s;let l,m,p=!1;if(h>0){p=function(t,s,i){let e=!1;const n=i.DOMGen.getSKByDepth(s),h=n.length;if(h>0){const s=i.DOMGen.getSiblingsByKey(n[h-1]),r=s.length;if(r>0){const n=s[r-1],{previousElementSibling:h}=t;h&&(e=h.isSameNode(i.interactiveDOM.get(n)))}}return e}(t,h,e),function(t){const s=q(t);j.test(s)&&$(t,f,"relative")}(t),function(t){1!==U(t,g,!0)&&$(t,g,"1")}(t);const{globals:{removeEmptyContainer:s}}=e;s||function(t){const s=s=>U(t,s,!1),i=s(u),e=s(a),n=s(d),h="auto"!==s(d);"auto"!==n||$(t,d,i),h||$(t,"min-width",e)}(t)}i&&({keys:l,VDOMOrder:{self:m}}=i);const{order:_,keys:T}=e.DOMGen.register(n,h,p,l,m),y=new rt({id:n,order:_,keys:T,depth:h,readonly:r,animation:o,CSSTransform:c});return e.registry.set(n,y),e.interactiveDOM.set(n,t),v(t,y.VDOMOrder.self),h>0&&(t.dataset.dflexKey=T.SK),T}const Tt="registerQ",yt="submitQ";class Ot extends gt{constructor(){super(),this.globals={...pt},this.ss=null,this.es=new L,this.DOMGen=new X}config(t){Object.assign(this.globals,t)}endRegistration(){this.ss=null,this.DOMGen.endRegistration()}addElmToRegistry(t,s,i){this.es.cancelQueuedTask();const{id:e,depth:n,readonly:h,animation:r,CSSTransform:c}=t;let l,u,a=this.registry.has(e);if(a){let t;[t,l]=this.getElmWithDOM(e),t.updateConfig(h,r,c),({SK:u}=t.keys)}else l=function(t){let s=document.getElementById(t);return s&&s.nodeType===Node.ELEMENT_NODE||(s=null),s}(e);D(l,(t=>{const l=mt(t),d=this.registry.has(l);if(this.es.hasElm(e)&&([u]=this.es.executeQueue(Tt),this.registry.get(e).updateConfig(h,r,c),a=!0),null===this.ss||!this.ss.isSameNode(t)){const h=s=>{u=function(t,s,i,e,n,h,r){let o=null;return t.childNodes.forEach(((t,c)=>{if(t instanceof HTMLElement){const c=mt(t);if(!i.registry.has(c)){const l={depth:s,readonly:h!==c,animation:e,id:c,CSSTransform:n};({SK:o}=_t(t,l,r,i))}}})),o}(t,n,this,r,c,e,s),a=!0},f=()=>{s&&i&&this.es.enqueueBeforeLast(i,(()=>s(u,n+1,t)),yt)};if(this.ss=t,d)a||(h(this.registry.get(l)),f());else{this.es.executeQueue(Tt);const s=n+1;a||h(null),this.es.enqueue((()=>{const{SK:i}=_t(t,{id:l,depth:s,readonly:!0,animation:o(),CSSTransform:null},null,this);return i}),Tt,l),f()}}return this.es.scheduleNextTask([Tt,yt]),!0}))}getElmSiblingsByKey(t){return this.DOMGen.getSiblingsByKey(t)}getSiblingKeysByDepth(t){return this.DOMGen.getSKByDepth(t)}unregister(t){this.dispose(t)}destroy(){this.DOMGen.clear(),this.es.clear(),this.ss=null,super.destroy()}}const St=new Map;function Et(t,s){St.has(s)||St.set(s,new Set);const i=St.get(s);return i.add(t),()=>{i.delete(t)}}function wt(t){const{type:s}=t,i=St.get(s);i&&i.forEach((s=>s(t)))}function xt(){St.forEach((t=>t.clear())),St.clear()}const Dt={PENDING:"pending",READY:"ready",DRAGGING:"dragging",DRAG_END:"dragEnd",DRAG_CANCEL:"dragCancel"},bt={LAYOUT_CAT:"layoutState",MUTATION_CAT:"mutation",ERROR_CAT:"error"},{freeze:vt}=Object;vt(Dt),vt(bt);const{LAYOUT_CAT:Nt,MUTATION_CAT:Rt}=bt;function At(t,s){t.notify({type:Nt,status:s})}function Mt(t,s,i){if(t.isUpdating)return void t.updatesQueue.push([s,i]);const e=t.isUpdating;t.isUpdating=!0;try{!function(t,s,i){const{deferred:e,listeners:n}=t;if(i&&i.onUpdate&&e.push(i.onUpdate),null!==s)try{s()}catch(t){n&&t instanceof Error&&e.push((()=>n.notify({type:"error",error:t})))}}(t,s,i)}finally{queueMicrotask((()=>{if(function(t,s){t.deferred=[],s.forEach((t=>t()))}(t,t.deferred),t.updatesQueue.length){const[s,i]=t.updatesQueue.shift();t.isUpdating=e,Mt(t,s,i)}t.isUpdating=e}))}}let It=!1;function Ct(t,s,i){const{rect:e}=s,[n,h]=i.getElmViewportPosition(e.top,e.left),r=e.getViewportPos(n,h,!0),[o]=i.isElmOutViewport(r,!0),c=It&&o,l=!o;return It=l,s.changeVisibility(t,l),c}function Kt(t,s,i,e,n){for(let h=i;h<e;h+=1){const i=t[h];if(i.length>0){const[t,e]=s.getElmWithDOM(i);t.changeVisibility(e,n)}}}function Pt(t,s){const i=t.getElmSiblingsByKey(s),e=t.scrolls.get(s);if(e.hasDynamicVisibility()){let s=0;for(let n=0;n<i.length;n+=1){const h=i[n];if(h.length>0){const[i,r]=t.getElmWithDOM(h);if(Ct(r,i,e)){s=n;break}}}s>0&&Kt(i,t,s,i.length,!1)}else Kt(i,t,0,i.length,!0);It=!1}let Lt=!1;function Bt(t,s){const i=new Map,e=new Set,n=new Set;if(s.forEach((s=>function(t,s,i,e,n){const[h,r]=t.getElmWithDOM(n,!1);if(!r||!h)return;const{keys:{SK:o,BK:c},depth:l}=h;if(!t.deletedDOM.has(r)){if(r.isConnected)return;if(!s.has(o)){s.set(o,{BK:c,depth:l});const h=t.getParentByElmID(n);if(h){const[t,s]=h;s.isConnected||(i.add(t),e.add(o))}}}}(t,i,e,n,s))),0!==i.size)return e.size>0?(n.forEach(((i,e)=>{const n=t.getElmSiblingsByKey(e),h=t.registry.get(n[0]);n.forEach((i=>{t.deleteFromRegistry(i),s.delete(i)})),t.cleanupSiblingsAttachments(h.keys.BK,e,h.depth)})),void Bt(t,e)):void i.forEach(((i,e)=>function(t,s,{BK:i,depth:e},n){const h=function(t,s,i){const e=[],n=t.getElmSiblingsByKey(i);for(let i=0;i<n.length;i+=1){const h=n[i];if(s.has(h))t.deleteFromRegistry(h);else{const s=t.registry.get(h),i=e.push(h)-1;i!==s.VDOMOrder.self&&s.updateIndex(t.interactiveDOM.get(h),i)}}return e}(t,s,n),{DOMGen:r}=t;h.length>0?(s.forEach((t=>{r.deleteIDFromBranch(i,n,e,t)})),r.mutateSiblings(n,h)):(t.cleanupSiblingsAttachments(i,n,e),r.deleteSiblings(i,e))}(t,s,i,e)))}function Gt(t,s){try{Lt=!0,Bt(t,s)}finally{Lt=!1}}let Ft=!1;const kt=new Set,Vt=new Set;function $t(){return Ft}function Ht(t,s){for(let i=0;i<s.length;i+=1){const e=s[i],{type:n,target:h,removedNodes:r,attributeName:o,oldValue:c}=e;h instanceof HTMLElement&&("childList"===n?r.forEach((s=>{if(s instanceof HTMLElement){const{id:i}=s;i&&t.registry.has(i)&&kt.add(i)}})):"attributes"===n&&"id"===o&&"string"==typeof c&&Vt.add({oldId:c,newId:h.id}))}}const Ut={childList:!0,subtree:!0,attributeFilter:["id"],attributeOldValue:!0};function zt(t,s,i){t.mutationObserverMap.has(s)||function(t,s){t.mutationObserverMap.set(s,new MutationObserver(((s,i)=>{!function(t,s,i){try{Ft=!0,Ht(t,s);const e=i.takeRecords();e.length>0&&Ht(t,e),Vt.size>0&&(function(t,s){s.forEach((s=>{if(t.registry.has(s.oldId)){const i=t.registry.get(s.oldId),e=t.getElmSiblingsByKey(i.keys.SK);t.registry.set(s.newId,i),t.registry.delete(s.oldId),e[i.VDOMOrder.self]=s.newId,i.id=s.newId}}))}(t,Vt),Vt.clear()),kt.size>0&&(Gt(t,kt),kt.clear())}finally{Ft=!1}}(t,s,i)})))}(t,s),t.mutationObserverMap.get(s).observe(i,Ut)}function jt(t){t.mutationObserverMap.forEach(((t,s)=>{t.disconnect()}))}function qt(t,s,i,e){const n=i.getElmWithDOM(e),[h,r]=n;return!!h.hasTransformedFromOrigin()&&(function(t,s,i,e,n){const{self:h}=e.VDOMOrder,{self:r}=e.DOMOrder;if(h+1===t.length)s.appendChild(n);else{const e=i.interactiveDOM.get(t[h+1]);s.insertBefore(n,e)}const o=h>r?1:-1;for(let s=h-1;s>=r;s-=1)i.registry.get(t[s]).DOMOrder.self+=o;e.DOMOrder.self=h}(t,s,i,h,r),h.refreshIndicators(r),!0)}const{PENDING:Wt,READY:Yt}=Dt;var Qt=function(t){return t[t.REGISTER=0]="REGISTER",t}(Qt||{});var Xt=new class extends Ot{constructor(){super(),this.containers=new Map,this.scrolls=new Map,this.unifiedContainerDimensions={},this.mutationObserverMap=new Map,this.ns=new Set,[this.hs]=C(0),this.migration=null,this.rs=!1,this.os=!1,[this.cs]=C(100),this.isComposing=!1,this.isUpdating=!1,this.deferred=[],this.updatesQueue=[],this.pending=[],this.listeners=this.globals.enableListeners?{subscribe:Et,notify:wt,clear:xt}:null,this.ls=this.ls.bind(this),this.us=this.us.bind(this),this.ds=this.ds.bind(this)}fs(){return!this.isUpdating&&0===this.updatesQueue.length&&0===this.deferred.length}isLayoutAvailable(){return this.fs()&&0===this.pending.length&&!(this.isComposing||Lt||$t())}gs(){this.listeners&&At(this.listeners,Wt),window.addEventListener("resize",this.ds)}linkElmToContainerGrid(t,s){const{rect:i}=s,e=t.register(i,this.unifiedContainerDimensions[s.depth]);s.DOMGrid.clone(e)}ps(t,s,i,e){s.resetIndicators(t.length);for(let n=0;n<=t.length-1;n+=1){const h=t[n],[r,o]=this.getElmWithDOM(h);if(!e||e.has(h)){const[t,s]=i;r.initElmRect(o,t,s)}this.linkElmToContainerGrid(s,r)}}ls(t,s,i){this.unifiedContainerDimensions[s-1]||(this.unifiedContainerDimensions[s-1]={width:0,height:0});const e=this.DOMGen.getSiblingsByKey(t),n=this.interactiveDOM.get(e[0]),h=Pt.bind(null,this),r=new ft(n,t,e.length,h);this.scrolls.has(t)&&this.scrolls.get(t).destroy(),this.scrolls.set(t,r);const o=new ot(i.id,i,e.length,r.totalScrollRect);this.containers.has(t),this.containers.set(t,o);const{totalScrollRect:{left:c,top:l}}=r;this.ps(e,o,[c,l],null),Pt(this,t)}_s(t){this.pending.forEach((([s,i])=>{i===t&&Mt(this,s,null)})),this.pending=this.pending.filter((([,s])=>s!==t))}us(){this.DOMGen.getTopLevelSKs().forEach((({id:t})=>{this.mutationObserverMap.has(t)||zt(this,t,this.interactiveDOM.get(t))})),this.isComposing=!1,this.endRegistration(),this._s(Qt.REGISTER),this.listeners&&At(this.listeners,Yt)}register(t){if(!this.os&&(this.os="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,!this.os))return;this.rs||(this.gs(),this.rs=!0),this.isComposing=!0;const{id:s,readonly:i=!1,depth:e=0,CSSTransform:n=null,animation:h}=t,r=o(h),c=this.registry.get(s);if(c){const t=this.interactiveDOM.get(s);if(t.isConnected||function(t,s){const i=new Set;t.interactiveDOM.forEach(((s,e)=>{s.isConnected||0===t.registry.get(e).depth&&i.add(e)})),0!==i.size&&Gt(t,i)}(this),t.isSameNode(t))return void c.updateConfig(i,r,n)}Mt(this,(()=>{this.addElmToRegistry({id:s,readonly:i,depth:e,CSSTransform:n,animation:r},this.ls,this.us)}),null)}deleteFromRegistry(t){super.unregister(t)}unregister(t){this.registry.has(t)&&(this.isComposing?this.pending.push([()=>{this.unregister(t)},Qt.REGISTER]):(this.ns.add(t),this.hs((()=>{$t()?this.ns.clear():Mt(this,(()=>Gt(this,this.ns)),{onUpdate:()=>this.ns.clear()})}),!0)))}Ts(){this.containers.forEach(((t,s)=>{if(!this.migration||!this.migration.getMigrationBySK(s)){const i=this.scrolls.get(s),e=this.getElmSiblingsByKey(s),{totalScrollRect:{left:n,top:h}}=i;this.ps(e,t,[n,h],null)}}))}ys(t){this.containers.forEach((s=>{const i=this.interactiveDOM.get(s.id);t(i)}))}Os(){return null===this.migration||0===this.migration.SKs.length}ds(){this.ys((t=>{H(t,"width"),H(t,"height")})),this.cs((()=>{V=new WeakMap,this.ys((t=>{!function(t){const{height:s,width:i}=z(t);$(t,u,`${s}px`),$(t,a,`${i}px`)}(t)}))}),!0),this.Os()?this.Ts():this.Ss(!0,(()=>this.Ts()))}Es(t,s){const[i,e]=this.getContainers(t),n=this.getElmSiblingsByKey(t);if(0===n.length)return;const h=this.interactiveDOM.get(i.id);Mt(this,(()=>{!function(t,s,i,e){const n=new Set;for(let i=t.length-1;i>=0;i-=1){const h=t[i];qt(t,s,e,h)&&n.add(h)}e.migration.updateReconciledIDs(i,n)}(n,h,t,this)}),{onUpdate:()=>{if(e.hasScrollDimensionChanges()){const{length:t}=n,s=t>0?this.interactiveDOM.get(n[0]):null;e.initialize(s,t)}const{totalScrollRect:{left:r,top:o}}=e;this.ps(n,i,[r,o],s?null:this.migration.getReconciledIDsBySK(t)),this.listeners&&this.listeners.notify({type:Rt,payload:{ids:n,target:h}})}})}Ss(t,s=null){this.Os()||(this.isComposing=!0,jt(this),this.migration.SKs.forEach((s=>this.Es(s,t))),Mt(this,s,{onUpdate:()=>{!function(t){t.mutationObserverMap.forEach(((s,i)=>{const e=t.interactiveDOM.get(i);zt(t,i,e)}))}(this),this.migration.clear(),this.isComposing=!1}}))}commit(t){this.Ss(!1,t)}getSerializedElm(t){const s=this.getScrollByID(t),i=this.registry.get(t);if(!s||!i)return null;const{rect:e}=i,[n,h]=s.getElmViewportPosition(e.top,e.left);return i.serializedElm(n,h)}getScrollByID(t){const s=this.getSKByID(t);return this.scrolls.get(s)}getContainerByID(t){const s=this.getSKByID(t);return this.containers.get(s)}getParentByElmID(t){const s=this.getContainerByID(t);if(s){const{id:t}=s;return[t,this.interactiveDOM.get(t)]}}getParentBySK(t){const s=this.containers.get(t);if(s)return this.interactiveDOM.get(s.id)}getContainers(t){return[this.containers.get(t),this.scrolls.get(t)]}cleanupSiblingsAttachments(t,s,i){const e=this.scrolls.get(s);e&&(e.destroy(),this.scrolls.delete(s)),this.containers.delete(s);const[,{ids:n}]=this.DOMGen.getHighestDepthInBranch(t),h=n[0];this.mutationObserverMap.has(h)&&(this.mutationObserverMap.get(h).disconnect(),this.mutationObserverMap.delete(h)),null!==this.migration&&this.migration.pruneSKFromMigration(s),0===this.registry.size&&this.ws()}xs(){return{containers:Object.fromEntries(this.containers),scrolls:Object.fromEntries(this.scrolls),mutationObserverMap:Object.fromEntries(this.mutationObserverMap)}}ws(){window.removeEventListener("resize",this.ds),I.forEach((t=>{t()})),I.length=0,R.forEach(A),R.length=0,this.rs=!1}destroy(){this.rs||(this.containers.clear(),this.listeners&&this.listeners.clear(),this.scrolls.forEach((t=>{t.destroy()})),this.scrolls.clear(),jt(this),this.mutationObserverMap.clear(),this.migration&&this.migration.clear(),super.destroy(),this.ws())}};var Zt=new class{constructor(){this.Ds=Xt,this.listeners=this.Ds.listeners}config(t){this.Ds.config(t)}has(t){return this.Ds.has(t)}hasActiveDrag(){const{migration:t}=this.Ds;return!!t&&t.isActive}getSiblingsByID(t){const s=this.Ds.getSKByID(t),i=[...this.Ds.getElmSiblingsByKey(s)];if(this.hasActiveDrag()){const{SK:t,id:e,index:n}=this.Ds.migration.latest();s===t&&function(t,s,i){""===t[t.length-1]?(t.pop(),t.splice(s,0,i)):t[s]=i}(i,n,e)}return i}getSerializedElement(t){return this.Ds.getSerializedElm(t)}getSerializedElements(t){return this.getSiblingsByID(t).map((t=>Xt.getSerializedElm(t)))}isLayoutAvailable(){return this.Ds.isLayoutAvailable()}register(t){return this.Ds.register(t)}unregister(t){this.Ds.unregister(t)}commit(){this.Ds.commit()}destroy(){return this.Ds.destroy()}};function Jt(t,s){b(t,"dragged",s,!1)}function ts(t,s){s?($(t,"position","relative"),$(t,"z-index","99")):(H(t,"position"),H(t,"z-index"))}function ss(t,s){if(!t.hasAttribute(s))return;const i=t.getAttribute(s);i&&""===i.trim()&&t.removeAttribute(s)}new class extends Ot{constructor(){super(),this.bs=this.bs.bind(this),this.vs=this.vs.bind(this)}vs(t){const[s,i]=this.getElmWithDOM(t);s.initElmRect(i,0,0)}bs(t){this.getElmSiblingsByKey(t).forEach(this.vs)}register(t){this.addElmToRegistry({id:t,depth:0,readonly:!1,animation:o(),CSSTransform:null},this.bs)}};class is{constructor(t,s,i){this.draggedElm=t,this.draggedDOM=s;const{translate:e}=this.draggedElm;this.Ns=new T(e.x-i.x,e.y-i.y),this.translatePlaceholder=new T(0,0),this.Rs=null}As(t,s){if(s)return this.Rs=t.ariaDisabled,void(t.ariaDisabled="true");t.ariaDisabled=this.Rs}setDOMAttrAndStyle(t,s,i,e,n){if(i){this.As(t,!0),Jt(t,!1),null!==s?(s.ariaLabel="Draggable",s.id=`dflex-draggable-mirror_${t.id}`,delete s.dataset.index,function(t,s,i){const[e=0,n=0]=s||[];$(t,"position","fixed"),$(t,"top",`${e}px`),$(t,"left",`${n}px`),i&&(i.y>0&&$(t,"height",`${i.y}px`),i.x>0&&$(t,"width",`${i.x}px`)),$(t,"z-index","99"),$(t,"margin","0")}(s,n,e),$(t,"opacity","0")):(t.ariaLabel="Draggable",ts(t,!0)),$(document.body,"user-select","none");const i=window.getSelection();i&&i.removeAllRanges()}else H(document.body,"user-select"),this.As(t,!1),t.ariaLabel=null,Jt(t,!0),null!==s?(H(t,"opacity"),s.remove()):ts(t,!1),ss(t,"style"),ss(document.body,"style")}translate(t,s){this.translatePlaceholder.setAxes(t+this.Ns.x,s+this.Ns.y),J.transform(this.draggedDOM,this.translatePlaceholder.x,this.translatePlaceholder.y)}}const es="out-container",ns="out-threshold",hs={DRAG_EVENT:{ON_OUT_CONTAINER:"$onDragOutContainer",ON_OUT_THRESHOLD:"$onDragOutThreshold",ON_ENTER_CONTAINER:"$onDragEnterContainer",ON_ENTER_THRESHOLD:"$onDragEnterThreshold",ON_COMMITTED:"$onDragCommitted",ON_TRANSFORMED:"$onDragTransformed"},INTERACTIVITY_EVENT:{ON_DRAG_OVER:"$onDragOver",ON_DRAG_LEAVE:"$onDragLeave"},SIBLINGS_EVENT:{ON_LIFT_UP:"$onLiftUpSiblings",ON_MOVE_DOWN:"$onMoveDownSiblings"}},rs={DRAG_CAT:"drag",INTERACTIVITY_CAT:"interactivity",SIBLINGS_CAT:"siblings"},os={DRAG_ATTR:{OUT_CONTAINER:es,OUT_THRESHOLD:ns}},cs={DRAG_ATTR_STATUS:{[es]:!1,[ns]:!1}},{freeze:ls}=Object;ls(hs),ls(rs),ls(os);const us={bubbles:!0,cancelable:!0,composed:!0},{DRAG_EVENT:{ON_ENTER_CONTAINER:as,ON_ENTER_THRESHOLD:ds,ON_OUT_CONTAINER:fs,ON_OUT_THRESHOLD:gs,ON_COMMITTED:ms,ON_TRANSFORMED:ps}}=hs,{DRAG_CAT:_s}=rs,{DRAG_ATTR:{OUT_CONTAINER:Ts,OUT_THRESHOLD:ys}}=os,{DRAG_ATTR_STATUS:Os}=cs;const{INTERACTIVITY_CAT:Ss,SIBLINGS_CAT:Es,DRAG_CAT:ws}=rs;function xs(t,s,{from:i,to:e,siblings:n,drag:h}){t.dispatch(s,{category:Es,timestamp:Date.now(),drag:h,from:i,to:e,siblings:n})}function Ds(t,s,{id:i,index:e,element:n}){t.dispatch(s,{category:ws,timestamp:Date.now(),element:n,id:i,index:e})}class bs{constructor(t,s,i){const{x:e,y:n}=t,{left:r,top:o}=i;this.Ms=new T(e,n),this.Kt=s;const c=s.top-o,l=s.left-r;this.Is=new h(c,l+s.width,c+s.height,l),this.Cs=new T(Math.round(e-l),Math.round(n-c))}Ks(){const{left:t,top:s}=this.Is;this.Ms.setAxes(t,s)}Ps(t,s){return[t-this.Cs.x,s-this.Cs.y]}setPos(t,s,i,e){this.Ks();const{width:n,height:h}=this.Kt,[r,o]=this.Ps(t,s),c=o+e,l=r+i;this.Is.setBox(c,l+n,c+h,l)}getPos(){return this.Is}getInnerOffset(){return this.Cs}getMovementDirection(t){const{x:s,y:i}=this.Ms,{left:e,top:n}=this.getPos();return"x"===t?e>s?"r":"l":n>i?"d":"u"}}class vs{constructor(t,s,i){this.Ls=new bs(t,s,i),this.Bs=new bs(t,s,{left:0,top:0})}setPos(t,s,i,e){this.Ls.setPos(t,s,0,0),this.Bs.setPos(t,s,i,e)}Gs(t){return t?this.Bs:this.Ls}getPos(t){return this.Gs(t).getPos()}getInnerOffset(t){return this.Gs(t).getInnerOffset()}getMovementDirection(t,s){return this.Gs(s).getMovementDirection(t)}}const{DRAGGING:Ns}=Dt;class Rs extends is{constructor(t,s,i){const[e,n]=Xt.getElmWithDOM(t);super(e,n,s),this.isLayoutStateUpdated=!1;const{VDOMOrder:h,DOMGrid:r,keys:{SK:o},depth:c,rect:l}=e;this.gridPlaceholder=new T(r.x,r.y);const u=Xt.getElmSiblingsByKey(o),a=w.newTravel(x);var d,f;this.session=[a],null===Xt.migration?Xt.migration=new F(h.self,this.draggedElm.id,o,a,!1):Xt.migration.add(h.self,this.draggedElm.id,o,!1,a,!1),this.isViewportRestricted=!0,this.containersTransition=Xt.getSiblingKeysByDepth(c).length>1?i.containersTransition:{...i.containersTransition,enable:!1},function(t,s){const i=Xt.containers.get(t);if(!i.lastElmPosition){const t=Xt.registry.get(s[s.length-1]);i.preservePosition(t.rect.getPosition())}}(o,u),this.appendDraggedToContainerDimensions(!0),this.threshold=new O(i.threshold),d=c,(f=this.threshold).setMainThreshold(t,l,!1),Xt.getSiblingKeysByDepth(d).forEach((t=>{const s=Xt.containers.get(t).getBoundaries();f.setContainerThreshold(t,d,s,Xt.unifiedContainerDimensions[d])}));const g=getComputedStyle(n),m=Math.round(parseFloat(g.marginRight)),p=Math.round(parseFloat(g.marginLeft));this.marginX=m+p;const{x:_,y}=s,{totalScrollRect:S}=Xt.scrolls.get(o);this.positions=new vs(s,l,S),this.initCoordinates=new T(_,y),this.restrictions=i.restrictions,this.restrictionsStatus=i.restrictionsStatus;const{globals:{enableEvents:E}}=Xt;var D;this.events=E?(D=n,{dispatch:function(t,s){!function(t,s,i){const e=Object.assign(us,{detail:i});!function(t,s,i){if(t.dispatchEvent(s),s.detail.category===_s&&i!==ms&&i!==ps)switch(i){case as:Os[Ts]=!1,b(t,Ts,!0);break;case ds:Os[ys]=!1,b(t,ys,!0);break;case fs:Os[Ts]=!0,b(t,Ts,!1);break;case gs:Os[ys]=!0,b(t,ys,!1)}}(t,new CustomEvent(s,e),s)}(D,t,s)},cleanupAttr:function(){Object.keys(Os).forEach((t=>{Os[t]&&b(D,t,!0)}))}}):null,this.axesFilterNeeded=null!==u&&(i.restrictionsStatus.isContainerRestricted||i.restrictionsStatus.isSelfRestricted)}appendDraggedToContainerDimensions(t){const{depth:s,rect:i}=this.draggedElm,e=i.height;Xt.unifiedContainerDimensions[s].height+=t?e:-1*e}axesYFilter(t,s,i,e,n,h){const r=this.positions.getInnerOffset(!0),o=t-r.y;return!e&&o<=s?h?s+r.y:this.initCoordinates.y:!n&&o+this.draggedElm.rect.height>=i?h?i+r.y-this.draggedElm.rect.height:this.initCoordinates.y:t}axesXFilter(t,s,i,e,n,h){const r=this.positions.getInnerOffset(!0),o=t-r.x;return!e&&o<=s?h?s+r.x:this.initCoordinates.x:!n&&o+this.draggedElm.rect.width+this.marginX>=i?h?i+r.x-this.draggedElm.rect.width-this.marginX:this.initCoordinates.x:t}dragWithOffset(t,s,i,e){this.isLayoutStateUpdated||(this.isLayoutStateUpdated=!0,Xt.listeners&&At(Xt.listeners,Ns));let n=s,h=t;const{SK:r}=Xt.registry.get(this.draggedElm.id).keys,o=Xt.containers.get(r);if(this.axesFilterNeeded){const i=o.getBoundaries(),{top:e,bottom:r,left:c,right:l}=i;this.restrictionsStatus.isContainerRestricted?(h=this.axesXFilter(t,c,l,this.restrictions.container.allowLeavingFromLeft,this.restrictions.container.allowLeavingFromRight,!1),n=this.axesYFilter(s,e,r,this.restrictions.container.allowLeavingFromTop,this.restrictions.container.allowLeavingFromBottom,!0)):this.restrictionsStatus.isSelfRestricted&&(h=this.axesXFilter(t,c,l,this.restrictions.self.allowLeavingFromLeft,this.restrictions.self.allowLeavingFromRight,!1),n=this.axesYFilter(s,this.draggedElm.rect.top,this.draggedElm.rect.top+this.draggedElm.rect.height,this.restrictions.self.allowLeavingFromTop,this.restrictions.self.allowLeavingFromBottom,!1))}else if(this.isViewportRestricted){const i=Xt.scrolls.get(r);h=this.axesXFilter(t,0,i.getMaximumScrollContainerLeft(),!1,!1,!0),n=this.axesYFilter(s,0,i.getMaximumScrollContainerTop(),!1,!1,!0)}this.translate(h,n),this.positions.setPos(h,n,i,e)}isOutThreshold(t,s){const{id:i,depth:e}=this.draggedElm;let n=t||i;s&&(n=O.containerKey(e,n));const h=this.positions.getPos(!0);return this.threshold.isOutThreshold(n,h,null)}isNotSettled(){const{migration:t,globals:{enableDragSettleOnSwitch:s}}=Xt,{SK:i,index:e,numberOfTransformedELm:n}=t.latest();return!(e===Xt.getElmSiblingsByKey(i).length-1)&&((s?!(n>0)&&this.isOutThreshold():this.isOutThreshold())||this.isOutThreshold(i))}}const As={enableAfterEndingDrag:!1};class Ms extends Rs{constructor(t,s,i){super(t,s,i),this.mirrorDOM=null,this.scroll={...i.scroll};const e=Xt.registry.get(t),{keys:{SK:n}}=e,h=Xt.getElmSiblingsByKey(n),r=Xt.getSiblingKeysByDepth(this.draggedElm.depth);this.enableCommit=h.length>1||this.containersTransition.enable&&r.length>1?{...i.commit}:As;const o=Xt.getScrollByID(t),{rect:c,translate:l}=this.draggedElm;if(o.hasOverflow.isAllFalsy()&&(this.scroll.enable=!1),this.scroll.enable){this.isViewportRestricted=!1;const t=Xt.interactiveDOM.get(this.draggedElm.id);this.mirrorDOM=t.cloneNode(!0);const s=this.draggedElm.getInitialPosition(),i=o.getElmViewportPosition(s.y,s.x);this.setDOMAttrAndStyle(this.draggedDOM,this.mirrorDOM,!0,this.draggedElm.getDimensions(t),i),this.draggedDOM.parentNode.insertBefore(this.mirrorDOM,this.draggedDOM),this.draggedDOM=this.mirrorDOM}else this.setDOMAttrAndStyle(this.draggedDOM,null,!0,null,null);this.occupiedPosition=new T(c.left,c.top),this.occupiedTranslate=new T(l.x,l.y)}setDraggedTempIndex(t){Number.isNaN(t)||Xt.migration.setIndex(t),v(Xt.interactiveDOM.get(this.draggedElm.id),t)}setDraggedTransformProcess(t,s,i){const{SK:e,index:n}=s,{rect:h,translate:r,id:o,VDOMOrder:c,DOMGrid:l}=this.draggedElm,u=Xt.getElmSiblingsByKey(e),a=Xt.interactiveDOM.get(o);if(t||this.occupiedPosition.isEqual(h.left,h.top)){if(u[c.self]!==o&&this.draggedElm.assignNewIndex(u,c.self),r.isInstanceEqual(this.translatePlaceholder))return;this.draggedElm.restorePosition(a)}else this.draggedElm.rect.setAxes(this.occupiedPosition.x,this.occupiedPosition.y),l.clone(this.gridPlaceholder),c.self=n,this.draggedElm.assignNewIndex(u,n),i||this.draggedElm.assignNewPosition(a,this.occupiedTranslate)}cleanup(t,s,i){const e=Xt.interactiveDOM.get(this.draggedElm.id);this.setDOMAttrAndStyle(e,this.mirrorDOM||null,!1,null,null),this.appendDraggedToContainerDimensions(!1),this.setDraggedTransformProcess(t,s,i),this.events&&this.events.cleanupAttr(),this.threshold.destroy()}}const{INTERACTIVITY_EVENT:{ON_DRAG_LEAVE:Is,ON_DRAG_OVER:Cs}}=hs,Ks="";function Ps(t){const{length:s}=t;return 0===s||1===s&&t[0]===Ks}function Ls(t,s){const i=Xt.getElmSiblingsByKey(s),{length:e}=i,{lastElmPosition:n,originLength:h}=Xt.containers.get(s),r=new T(0,0),o=Ps(i),c=i[e-1]===Ks,l=!o&&(1===e||2===e&&c);let u=!1,a=null,d=null;if(n&&(r.clone(n),u=!0),!o){let s=t-1;if(t===e-1){let o=t;c&&(s-=1,o-=1),a=Xt.registry.get(i[o]);const l=a.rect.getPosition();n?e<=h?(r.clone(n),u=!n.isInstanceEqual(l)):(u=!1,r.clone(l)):r.clone(l)}else{a=Xt.registry.get(i[t]);const s=a.rect.getPosition();r.clone(s)}!l&&s>=0&&(d=Xt.registry.get(i[s]))}return{isEmpty:o,isOrphan:l,isRestoredLastPosition:u,position:r,elm:a,prevElm:d}}class Bs{constructor(t){this.draggable=t,this.Fs=new T(0,0),this.ks=new T(0,0),this.Vs=new T(0,0),this.isParentLocked=!1,this.isOutsideThreshold=!1}$s(t,s,i){const{occupiedPosition:e,draggedElm:n}=this.draggable,h=Math.abs(i.rect.getPositionDiff(t,e)),r=i.rect.getDimensionDiff(t,n.rect);-1===s?(this.Vs[t]=h+r,this.ks[t]=r,this.Fs[t]=h):(this.Vs[t]=h,this.ks[t]=0,this.Fs[t]=h-r)}Hs(t,s){this.Vs[t]*=-1*s,this.draggable.occupiedTranslate[t]+=this.Vs[t]}Us(t,s,i){this.Fs.setAxes(0,0),this.Vs.setAxes(0,0),this.ks.setAxes(0,0),("z"===t?k:[t]).forEach((t=>{this.$s(t,s,i),this.Hs(t,s)}));const{rect:e,DOMGrid:n}=i;this.draggable.occupiedPosition.setAxes(e.left+this.ks.x,e.top+this.ks.y),this.draggable.gridPlaceholder.clone(n)}updateDraggedThresholdPosition(t,s){const{threshold:i,draggedElm:{id:e,rect:{width:n,height:h}}}=this.draggable;i.updateMainThreshold(e,{top:s,right:t+n,bottom:s+h,left:t},!1)}zs(t,s,i){const e=m(i),{draggedElm:n}=this.draggable;t[i]+=n.rect[e];const h=s.rect.getDimensionDiff(i,n.rect);t[i]+=h}getComposedOccupiedTranslateAndGrid(t,s,i,e){const{isEmpty:n,isOrphan:h,position:r,elm:o,prevElm:c}=Ls(s,t),{draggedElm:l,containersTransition:u}=this.draggable,{migration:a}=Xt,d={x:rt.getDistance(r,l,"x"),y:rt.getDistance(r,l,"y")},f=new T(0,0);if(!n){if(!h){const{DOMGrid:t}=o;f.clone(t)}if(i)f[e]-1>=1&&(f[e]-=1);else{f[e]+=1;const{marginBottom:t,marginTop:s}=a.prev();this.zs(d,o,e),d[e]+=h?"number"==typeof s?s:"number"==typeof t?t:u.margin:rt.getDisplacement(r,c,e)}}return this.updateDraggedThresholdPosition(d.x,d.y),{translate:d,grid:f}}getComposedOccupiedPosition(t,s){const i=Xt.getElmSiblingsByKey(t),{length:e}=i,{isEmpty:n,isOrphan:h,position:r,isRestoredLastPosition:o,elm:c,prevElm:l}=Ls(e-1,t);if(n)return o?r:new T(0,0);const u=c.rect.getPosition();this.zs(u,c,s);const{containersTransition:a}=this.draggable,{migration:d}=Xt,{marginBottom:f,marginTop:g}=d.latest(),m=o?rt.getDisplacement(r,c,s):h?"number"==typeof g?g:"number"==typeof f?f:a.margin:rt.getDisplacement(r,l,s);return u[s]+=Math.abs(m),u}updateElement(t,s,i,e){const{draggedElm:n,occupiedPosition:h,gridPlaceholder:r,events:o}=this.draggable,{SK:c,cycleID:l}=Xt.migration.latest(),u=Xt.getElmSiblingsByKey(c),{grid:a}=Xt.containers.get(c),[d,f]=Xt.getElmWithDOM(t);let g=d.rect.isPositionedY({left:h.x,top:h.y,bottom:h.y+n.rect.height,right:h.x+n.rect.width})?"y":"x";if(!h.onSameAxis(g,d.rect.getPosition())){const t=t=>d.DOMGrid[t]>0||r[t]>0;("y"===g&&t("x")||"x"===g&&t("y"))&&(g="z")}const m=i?-1:1;this.Us(g,m,d);const p=null===o||e?null:t=>function(t,s,i,e,n){const{id:h,VDOMOrder:{self:r}}=i,o=n.interactiveDOM.get(i.id),c=n.interactiveDOM.get(e);t.dispatch(s,{category:Ss,timestamp:Date.now(),id:h,index:r,drag:c,target:o})}(o,t,d,n.id,Xt);if(!this.isParentLocked){const{rect:t}=d;this.updateDraggedThresholdPosition(t.left,t.top)}p&&p(Cs),d.reconcilePosition(g,m,f,u,this.Fs,s,a,l),p&&p(Is)}}function Gs(t){return t<.5?4*t**3:1-(-2*t+2)**3/2}class Fs extends Bs{constructor(t){super(t);const{SK:i}=Xt.migration.latest();if(this.cancelScrolling=null,this.initialScrollPosition=new T(0,0),!Xt.scrolls.has(i))return;this.js=new T(0,0),this.qs=new s(-1,-1);const{totalScrollRect:{left:e,top:n},visibleScrollRect:{width:h,height:r}}=Xt.scrolls.get(i),o=function(t,s){return Math.round(t>s?t/8.5:s/8.5)}(h,r);[this.Ws,,this.Ys]=C(o),this.initialScrollPosition.setAxes(e,n)}hasActiveScrolling(){return!this.Ys()&&null!==this.cancelScrolling}Qs(t,s,i,e,n){const h=Xt.scrolls.get(n);if(this.cancelScrolling)return void((e||i)&&this.cancelScrolling());const r=this.draggable.positions.getPos(!1),[o,c]=h.isElmOutViewport(r,!1);if(!o)return;const l=c.isTruthyOnSide("y",s),u=c.isTruthyOnSide("x",t);if(!l&&!u)return;let a="y",d=s;if(u&&(a="x",d=s),c.setFalsy(),!h.hasScrollableArea(a,d))return void this.Ws(null,!0);const f=()=>{h.pauseListeners(!1),this.cancelScrolling=null};h.pauseListeners(!0),this.cancelScrolling=function(t,s,i,e,n,h,r){let o,c,l,u=0,a=!1;const[d,f]=M(),g=e=>{l||(l=e,o=t.totalScrollRect[p(s)],c=t.calculateDistance(s,i),u=u||75*Math.sqrt(c));const r=Math.min((e-l)/u,1),f=n(r),m=o+i*(c*f);"x"===s?t.scrollTo(m,-1):t.scrollTo(-1,m),!a&&r<1?d(g,!1):h&&h()};return d(g,!1),()=>{a=!0,f(),r()}}(h,a,d,0,Gs,f,f)}scrollFeed(t,s,i){const e=t<this.js.x?-1:1,n=s<this.js.y?-1:1,h=e!==this.qs.x,r=n!==this.qs.y;this.Ys()||this.Qs(e,n,h,r,i),this.js.setAxes(t,s),this.qs.setAxes(e,n)}}const{DRAG_EVENT:{ON_OUT_CONTAINER:ks,ON_OUT_THRESHOLD:Vs,ON_ENTER_CONTAINER:$s,ON_ENTER_THRESHOLD:Hs},SIBLINGS_EVENT:{ON_LIFT_UP:Us,ON_MOVE_DOWN:zs}}=hs;function js(t,s){const{registry:i}=Xt;return t.length>0&&t!==s&&i.has(t)&&!i.get(t).readonly}class qs extends Fs{static INDEX_OUT_CONTAINER=NaN;static getTheLastValidElm(t,s){for(let i=t.length-1;i>=0;i-=1){const e=t[i];if(js(e,s))return Xt.registry.get(e)}throw new Error(`No valid element found.${t}\n`)}constructor(t){super(t),this.hasBeenScrolling=!1,this.yt=M(),[this.Xs]=C(0),this.Zs=null,this.Js=new E}ti(){let t=null;const{draggedElm:s}=this.draggable,{SK:i}=Xt.migration.latest(),e=Xt.getElmSiblingsByKey(i);for(let i=0;i<e.length;i+=1){const n=e[i];if(js(n,s.id)&&Xt.registry.get(n).rect.isBoxIntersect(this.draggable.positions.getPos(!0))){t=i;break}}return t}si(){const{draggedElm:t,occupiedTranslate:s,gridPlaceholder:i}=this.draggable,{migration:e}=Xt,{SK:n}=e.latest(),h=Xt.getElmSiblingsByKey(n),r=Xt.containers.get(n);let o=!0;const c=Ps(h);let l,u,a=c?0:this.ti();if("number"!=typeof a){const{lastElmPosition:t}=r;!e.isTransitioning&&t&&this.updateDraggedThresholdPosition(t.x,t.y),a=h.length-1,o=!1}this.draggable.setDraggedTempIndex(a),this.ii(!1),e.isTransitioning&&({translate:l,grid:u}=this.getComposedOccupiedTranslateAndGrid(n,a,o,"y")),o&&!c&&this.ei(a),e.clearMargin(),e.isTransitioning&&queueMicrotask((()=>{const{x:r,y:o}=this.Zs,c={top:o,right:r+t.rect.width,bottom:o+t.rect.height,left:r};s.clone(l),i.clone(u);let a=u;const d=Xt.registry.get(h[h.length-1]);d&&(({DOMGrid:a}=d),a.y<u.y&&(a=u)),function(t,s,i){Xt.containers.get(t).register(i);const e=Xt.getElmSiblingsByKey(s);if(0===e.length)return;const n=Xt.containers.get(s);n.resetIndicators(e.length),e.forEach((t=>{const s=Xt.registry.get(t),i=n.register(s.rect);s.DOMGrid.clone(i)}));const h=Xt.registry.get(e[e.length-1]);n.preservePosition(h.rect.getPosition())}(n,e.prev().SK,c),0===r&&0===o&&(this.draggable.enableCommit.enableAfterEndingDrag||(this.draggable.enableCommit.enableAfterEndingDrag=!0)),this.Zs=null,e.complete()}))}ni(){const{draggedElm:t}=this.draggable,{migration:s}=Xt,{depth:i}=t;let e;const n=O.depthKey(i);if(this.draggable.isOutThreshold(n))return;const h=Xt.getSiblingKeysByDepth(i),{SK:r}=s.latest();for(let i=0;i<h.length;i+=1)if(e=h[i],e!==r&&!this.draggable.isOutThreshold(e,!0)){s.start();const i=Xt.getElmSiblingsByKey(e),n=Xt.containers.get(e),h="y";this.Zs=this.getComposedOccupiedPosition(e,h);const o=Xt.getElmSiblingsByKey(r),c=Xt.containers.get(r);o.pop(),c.reduceGrid(h),this.draggable.occupiedPosition.clone(this.Zs),this.draggable.gridPlaceholder.setAxes(1,1),t.keys.SK=e,i.push(Ks),n.extendGrid(h);const l=w.newTravel(x);this.draggable.session.push(l),s.add(NaN,t.id,e,!0,l,Xt.scrolls.get(e).hasOverflow.isOneTruthy());break}}hi(){const{occupiedPosition:t,draggedElm:s,events:i}=this.draggable,{migration:e}=Xt,{SK:n,index:h}=e.latest(),r=Xt.getElmSiblingsByKey(n),o=h+1;if(h>0){const s=Xt.registry.get(r[e.latest().index-1]);e.preserveVerticalMargin("top",t.y-s.rect.bottom)}if(o===r.length)return;const c=Xt.registry.get(r[o]);if(c){e.preserveVerticalMargin("bottom",c.rect.top-(t.y+s.rect.height)),i&&xs(i,Us,{drag:Xt.interactiveDOM.get(s.id),siblings:r,from:o-1,to:r.length-1}),this.draggable.setDraggedTempIndex(qs.INDEX_OUT_CONTAINER);for(let t=o;t<r.length;t+=1){const i=r[t];js(i,s.id)&&this.updateElement(i,1,!0,!0)}}}ei(t){const{events:s,draggedElm:i}=this.draggable,{migration:e}=Xt,{SK:n}=e.latest(),h=Xt.getElmSiblingsByKey(n),{length:r}=h;s&&xs(s,zs,{drag:Xt.interactiveDOM.get(i.id),siblings:h,from:t,to:r-1});for(let s=r-1;s>=t;s-=1){const t=h[s];js(t,i.id)&&this.updateElement(t,1,!1,!0)}}ri(t,s,i,e,n){const{gridPlaceholder:h}=this.draggable,r=n?h[t]+1:h[t]-1;if(-1===r)return this.ii(!0),void this.hi();if(r>i[t])return void this.ii(!0);const{draggedElm:{id:o}}=this.draggable,{SK:c,index:l}=Xt.migration.latest(),u=Xt.getElmSiblingsByKey(c);let a;if(e)a=l+(n?1:-1);else{const i={x:0,y:0};if(i[t]=r,i[s]=h[s],a=u.findIndex((t=>!!js(t,o)&&Xt.registry.get(t).DOMGrid.isInstanceEqual(i))),-1===a)return}const d=u[a];if(!d||!js(d,o))return;const f=this.draggable.threshold.getElmMainThreshold(Xt.registry.get(d).rect),g=this.draggable.threshold.thresholds[o];if(f.isBoxIntersect(this.draggable.threshold.thresholds[o])){const{positions:s,scroll:{enable:i}}=this.draggable,e=s.getMovementDirection(t,i);this.Js.setZone(t,e,f,g),this.draggable.setDraggedTempIndex(a);const h=Math.abs(l-a);this.updateElement(d,h,n,!1)}else this.ii(!0),this.hi()}oi(t){const{draggedElm:{id:s,keys:{SK:i}},threshold:{isOut:e}}=this.draggable,{grid:n}=Xt.containers.get(i),h=function(t){return"x"===t?"y":"x"}(t),r=0===n[h];if(e[s].isTruthyByAxis(t)){const i="y"===t?e[s].bottom:e[s].right,{positions:o,scroll:{enable:c}}=this.draggable,l=o.getMovementDirection(t,c),u=o.getPos(!1);return this.Js.isInside(t,l,u)||this.ri(t,h,n,r,i),!0}return!!r&&(this.ii(!0),this.hi(),!0)}ii(t){if(t===this.isParentLocked)return;const{draggedElm:s,events:i}=this.draggable;if(i){const{id:e}=s,n=Xt.interactiveDOM.get(e);Ds(i,t?ks:$s,{id:e,element:n,index:Xt.migration.latest().index})}this.isParentLocked=t,this.Js.clear()}ci(t){if(t===this.isOutsideThreshold)return;const{draggedElm:s,events:i}=this.draggable;if(i){const{id:e}=s,{migration:n}=Xt,h=Xt.interactiveDOM.get(e);Ds(i,t?Vs:Hs,{id:e,element:h,index:n.latest().index})}this.isOutsideThreshold=t}li(){this.isOutsideThreshold||this.ci(!0),this.oi("y")||this.oi("x")}ui(){const{containersTransition:t}=this.draggable,{migration:s}=Xt;this.isParentLocked||this.ii(!0),t.enable&&this.Xs((()=>{this.ni(),s.isTransitioning&&Mt(Xt,null,{onUpdate:()=>{this.si()}})}),!0)}ai(){const[t,,s]=this.yt;s()&&t((()=>{this.si()}),!1)}di(t,s,i){if(!this.draggable.isOutThreshold(t)&&this.isParentLocked){const[e,n]=this.fi(t);this.draggable.positions.setPos(s,i,e,n),this.si()}this.hasBeenScrolling=!1}fi(t){const{totalScrollRect:{left:s,top:i}}=Xt.scrolls.get(t),{x:e,y:n}=this.initialScrollPosition;return[s-e,i-n]}gi(t,s,i){let e=!1;const{scroll:{enable:n}}=this.draggable;if(!n)return!1;const[h,r]=Xt.getContainers(i);return h.getBoundaries().isInsideThreshold(r.visibleScrollRect)?!!this.hasBeenScrolling&&(this.di(i,t,s),!0):(this.scrollFeed(t,s,i),this.hasActiveScrolling()?(this.hasBeenScrolling||(Mt(Xt,null,{onUpdate:()=>{e=this.draggable.isOutThreshold(i),e||this.isParentLocked||(this.ii(!0),this.hi())}}),this.hasBeenScrolling=!0),!0):!!this.hasBeenScrolling&&(this.di(i,t,s),!0))}dragAt(t,s){if(!Xt.isLayoutAvailable)return;const{migration:i}=Xt,{SK:e}=i.latest();let n=!1;if(this.gi(t,s,e))return;const[h,r]=this.fi(e);if(this.draggable.dragWithOffset(t,s,h,r),!i.isTransitioning){if(this.draggable.isOutThreshold())return this.isParentLocked?(n=this.draggable.isOutThreshold(e),n?void this.ui():void this.ai()):void this.li();if(this.isParentLocked){if(n=this.draggable.isOutThreshold(e),n)return;this.ai()}else this.isOutsideThreshold&&this.ci(!1)}}}const{DRAG_EVENT:{ON_COMMITTED:Ws,ON_TRANSFORMED:Ys}}=hs,{DRAG_CANCEL:Qs,DRAG_END:Xs}=Dt;class Zs extends qs{mi(t,s){const{threshold:i,draggedElm:{id:e,VDOMOrder:{self:n}}}=this.draggable,{index:h,cycleID:r}=s;for(let s=t.length-1;s>=0;s-=1){const i=t[s];if(js(i,e)){const[t,s]=Xt.getElmWithDOM(i);t.rollBackPosition(s,r)}}t.splice(this.isParentLocked||i.isOut[e].bottom?t.length-1:h,1),t.splice(n,0,e)}pi(){let t=!1;return this.hasActiveScrolling()?(t=!0,this.cancelScrolling()):t=this.hasBeenScrolling||this.draggable.isNotSettled(),t}_i(t){const{events:s,draggedElm:i}=this.draggable;let e;if(s){const{migration:n}=Xt,h=n.latest(),{index:r,SK:o}=h,{SK:c}=n.getAll()[0],{VDOMOrder:{self:l},id:u}=i;e=()=>{const i=Xt.interactiveDOM.get(u),e=Xt.getParentBySK(o),n=Xt.getParentBySK(c);!function(t,s,{element:i,indexes:e,containers:n}){t.dispatch(s,{category:ws,timestamp:Date.now(),containers:n,element:i,indexes:e})}(s,t?Ws:Ys,{element:i,indexes:{initial:l,inserted:r},containers:{origin:n,target:e}})}}return e}endDragging(){const{enableCommit:t,session:s}=this.draggable,{migration:i,listeners:e}=Xt,n=i.latest(),h=i.filter(s,!0),r=this.pi(),o=t=>{this.draggable.cleanup(r,n,t),i.isActive=!1};if(r)return void Mt(Xt,(()=>{h.forEach((t=>{const s=Xt.getElmSiblingsByKey(t.SK);this.mi(s,t)}))}),{onUpdate:()=>{o(!1),i.flush(s),e&&At(e,Qs)}});const c=n.hasScroll&&h.length>1,{enableAfterEndingDrag:l}=t,u=l||c,a=this._i(u);Mt(Xt,(()=>o(u)),e?{onUpdate:()=>{At(e,Xs)}}:null),u&&Xt.commit(),a&&a()}}const Js=Object.freeze({containersTransition:{enable:!0,margin:10},threshold:{vertical:60,horizontal:60},restrictions:{self:{allowLeavingFromTop:!0,allowLeavingFromBottom:!0,allowLeavingFromLeft:!0,allowLeavingFromRight:!0},container:{allowLeavingFromTop:!0,allowLeavingFromBottom:!0,allowLeavingFromLeft:!0,allowLeavingFromRight:!0}},scroll:{enable:!0,initialSpeed:10,threshold:{vertical:15,horizontal:15}},commit:{enableAfterEndingDrag:!0}});exports.DFLEX_ATTRS=os,exports.DFLEX_EVENTS=hs,exports.DFLEX_EVENTS_CAT=rs,exports.DFLEX_LISTENERS_CAT=bt,exports.DnD=class extends Zs{constructor(t,s,i=Js){const e=function(t){const s={...t};return Object.keys(Js).forEach((t=>{if("restrictions"===t&&(s.restrictionsStatus={isSelfRestricted:!1,isContainerRestricted:!1}),void 0!==s[t]){if(Object.keys(Js[t]).forEach((i=>{if("object"==typeof Js[t][i])return void 0!==s[t][i]?void(s[t][i]={...Js[t][i],...s[t][i]}):void(s[t][i]={...Js[t][i]});void 0===s[t][i]&&(s[t][i]=Js[t][i])})),"restrictions"===t){const i=Object.keys(s.restrictions.self);let e=!1;for(let n=0;n<i.length;n+=1)if(!s[t].self[i[n]]){e=!0;break}let n=!1;for(let e=0;e<i.length;e+=1)if(!s[t].container[i[e]]){n=!0;break}s.restrictionsStatus.isSelfRestricted=e,s.restrictionsStatus.isContainerRestricted=n}}else s[t]="object"==typeof s[t]?{...Js[t]}:Js[t]})),s}(i);super(new Ms(t,s,e))}},exports.store=Zt;
